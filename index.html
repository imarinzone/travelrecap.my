<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Travel Recap</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet"
        crossorigin="anonymous">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Your Travel Recap" />
    <meta property="og:description"
        content="Visualize your Google Timeline data with beautiful interactive maps and stats. 100% private and client-side." />
    <meta property="og:type" content="website" />

    <!-- Leaflet CSS (Inlined for file:// compatibility) -->
    <style>
        /* required styles */
        .leaflet-pane,
        .leaflet-tile,
        .leaflet-marker-icon,
        .leaflet-marker-shadow,
        .leaflet-tile-container,
        .leaflet-pane>svg,
        .leaflet-pane>canvas,
        .leaflet-zoom-box,
        .leaflet-image-layer,
        .leaflet-layer {
            position: absolute;
            left: 0;
            top: 0;
        }

        .leaflet-container {
            overflow: hidden;
        }

        .leaflet-tile,
        .leaflet-marker-icon,
        .leaflet-marker-shadow {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
        }

        .leaflet-tile::selection {
            background: transparent;
        }

        .leaflet-safari .leaflet-tile {
            image-rendering: -webkit-optimize-contrast;
        }

        .leaflet-safari .leaflet-tile-container {
            width: 1600px;
            height: 1600px;
            -webkit-transform-origin: 0 0;
        }

        .leaflet-marker-icon,
        .leaflet-marker-shadow {
            display: block;
        }

        .leaflet-container .leaflet-overlay-pane svg {
            max-width: none !important;
            max-height: none !important;
        }

        .leaflet-container .leaflet-marker-pane img,
        .leaflet-container .leaflet-shadow-pane img,
        .leaflet-container .leaflet-tile-pane img,
        .leaflet-container img.leaflet-image-layer,
        .leaflet-container .leaflet-tile {
            max-width: none !important;
            max-height: none !important;
            width: auto;
            padding: 0;
        }

        .leaflet-container img.leaflet-tile {
            mix-blend-mode: plus-lighter;
        }

        .leaflet-container.leaflet-touch-zoom {
            -ms-touch-action: pan-x pan-y;
            touch-action: pan-x pan-y;
        }

        .leaflet-container.leaflet-touch-drag {
            -ms-touch-action: pinch-zoom;
            touch-action: none;
            touch-action: pinch-zoom;
        }

        .leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {
            -ms-touch-action: none;
            touch-action: none;
        }

        .leaflet-container {
            -webkit-tap-highlight-color: transparent;
        }

        .leaflet-container a {
            -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);
        }

        .leaflet-tile {
            filter: inherit;
            visibility: hidden;
        }

        .leaflet-tile-loaded {
            visibility: inherit;
        }

        .leaflet-zoom-box {
            width: 0;
            height: 0;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            z-index: 800;
        }

        .leaflet-overlay-pane svg {
            -moz-user-select: none;
        }

        .leaflet-pane {
            z-index: 400;
        }

        .leaflet-tile-pane {
            z-index: 200;
        }

        .leaflet-overlay-pane {
            z-index: 400;
        }

        .leaflet-shadow-pane {
            z-index: 500;
        }

        .leaflet-marker-pane {
            z-index: 600;
        }

        .leaflet-tooltip-pane {
            z-index: 650;
        }

        .leaflet-popup-pane {
            z-index: 700;
        }

        .leaflet-map-pane canvas {
            z-index: 100;
        }

        .leaflet-map-pane svg {
            z-index: 200;
        }

        .leaflet-vml-shape {
            width: 1px;
            height: 1px;
        }

        .lvml {
            behavior: url(#default#VML);
            display: inline-block;
            position: absolute;
        }

        .leaflet-control {
            position: relative;
            z-index: 800;
            pointer-events: visiblePainted;
            pointer-events: auto;
        }

        .leaflet-top,
        .leaflet-bottom {
            position: absolute;
            z-index: 1000;
            pointer-events: none;
        }

        .leaflet-top {
            top: 0;
        }

        .leaflet-right {
            right: 0;
        }

        .leaflet-bottom {
            bottom: 0;
        }

        .leaflet-left {
            left: 0;
        }

        .leaflet-control {
            float: left;
            clear: both;
        }

        .leaflet-right .leaflet-control {
            float: right;
        }

        .leaflet-top .leaflet-control {
            margin-top: 10px;
        }

        .leaflet-bottom .leaflet-control {
            margin-bottom: 10px;
        }

        .leaflet-left .leaflet-control {
            margin-left: 10px;
        }

        .leaflet-right .leaflet-control {
            margin-right: 10px;
        }

        .leaflet-fade-anim .leaflet-popup {
            opacity: 0;
            -webkit-transition: opacity 0.2s linear;
            -moz-transition: opacity 0.2s linear;
            transition: opacity 0.2s linear;
        }

        .leaflet-fade-anim .leaflet-map-pane .leaflet-popup {
            opacity: 1;
        }

        .leaflet-zoom-animated {
            -webkit-transform-origin: 0 0;
            -ms-transform-origin: 0 0;
            transform-origin: 0 0;
        }

        svg.leaflet-zoom-animated {
            will-change: transform;
        }

        .leaflet-zoom-anim .leaflet-zoom-animated {
            -webkit-transition: -webkit-transform 0.25s cubic-bezier(0, 0, 0.25, 1);
            -moz-transition: -moz-transform 0.25s cubic-bezier(0, 0, 0.25, 1);
            transition: transform 0.25s cubic-bezier(0, 0, 0.25, 1);
        }

        .leaflet-zoom-anim .leaflet-tile,
        .leaflet-pan-anim .leaflet-tile {
            -webkit-transition: none;
            -moz-transition: none;
            transition: none;
        }

        .leaflet-zoom-anim .leaflet-zoom-hide {
            visibility: hidden;
        }

        .leaflet-interactive {
            cursor: pointer;
        }

        .leaflet-grab {
            cursor: -webkit-grab;
            cursor: -moz-grab;
            cursor: grab;
        }

        .leaflet-crosshair,
        .leaflet-crosshair .leaflet-interactive {
            cursor: crosshair;
        }

        .leaflet-popup-pane,
        .leaflet-control {
            cursor: auto;
        }

        .leaflet-dragging .leaflet-grab,
        .leaflet-dragging .leaflet-grab .leaflet-interactive,
        .leaflet-dragging .leaflet-marker-draggable {
            cursor: move;
            cursor: -webkit-grabbing;
            cursor: -moz-grabbing;
            cursor: grabbing;
        }

        .leaflet-marker-icon,
        .leaflet-marker-shadow,
        .leaflet-image-layer,
        .leaflet-pane>svg path,
        .leaflet-tile-container {
            pointer-events: none;
        }

        .leaflet-marker-icon.leaflet-interactive,
        .leaflet-image-layer.leaflet-interactive,
        .leaflet-pane>svg path.leaflet-interactive,
        svg.leaflet-image-layer.leaflet-interactive path {
            pointer-events: visiblePainted;
            pointer-events: auto;
        }

        .leaflet-container {
            background: #ddd;
            outline-offset: 1px;
        }

        .leaflet-container a {
            color: #0078A8;
        }

        .leaflet-zoom-box {
            border: 2px dotted #38f;
            background: rgba(255, 255, 255, 0.5);
        }

        .leaflet-container {
            font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
            font-size: 12px;
            font-size: 0.75rem;
            line-height: 1.5;
        }

        .leaflet-bar {
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);
            border-radius: 4px;
        }

        .leaflet-bar a {
            background-color: #fff;
            border-bottom: 1px solid #ccc;
            width: 26px;
            height: 26px;
            line-height: 26px;
            display: block;
            text-align: center;
            text-decoration: none;
            color: black;
        }

        .leaflet-bar a,
        .leaflet-control-layers-toggle {
            background-position: 50% 50%;
            background-repeat: no-repeat;
            display: block;
        }

        .leaflet-bar a:hover,
        .leaflet-bar a:focus {
            background-color: #f4f4f4;
        }

        .leaflet-bar a:first-child {
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
        }

        .leaflet-bar a:last-child {
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            border-bottom: none;
        }

        .leaflet-bar a.leaflet-disabled {
            cursor: default;
            background-color: #f4f4f4;
            color: #bbb;
        }

        .leaflet-touch .leaflet-bar a {
            width: 30px;
            height: 30px;
            line-height: 30px;
        }

        .leaflet-touch .leaflet-bar a:first-child {
            border-top-left-radius: 2px;
            border-top-right-radius: 2px;
        }

        .leaflet-touch .leaflet-bar a:last-child {
            border-bottom-left-radius: 2px;
            border-bottom-right-radius: 2px;
        }

        .leaflet-control-zoom-in,
        .leaflet-control-zoom-out {
            font: bold 18px 'Lucida Console', Monaco, monospace;
            text-indent: 1px;
        }

        .leaflet-touch .leaflet-control-zoom-in,
        .leaflet-touch .leaflet-control-zoom-out {
            font-size: 22px;
        }

        .leaflet-control-layers {
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
            background: #fff;
            border-radius: 5px;
        }

        .leaflet-control-layers-toggle {
            width: 36px;
            height: 36px;
        }

        .leaflet-retina .leaflet-control-layers-toggle {
            background-size: 26px 26px;
        }

        .leaflet-touch .leaflet-control-layers-toggle {
            width: 44px;
            height: 44px;
        }

        .leaflet-control-layers .leaflet-control-layers-list,
        .leaflet-control-layers-expanded .leaflet-control-layers-toggle {
            display: none;
        }

        .leaflet-control-layers-expanded .leaflet-control-layers-list {
            display: block;
            position: relative;
        }

        .leaflet-control-layers-expanded {
            padding: 6px 10px 6px 6px;
            color: #333;
            background: #fff;
        }

        .leaflet-control-layers-scrollbar {
            overflow-y: scroll;
            overflow-x: hidden;
            padding-right: 5px;
        }

        .leaflet-control-layers-selector {
            margin-top: 2px;
            position: relative;
            top: 1px;
        }

        .leaflet-control-layers label {
            display: block;
            font-size: 13px;
            font-size: 1.08333em;
        }

        .leaflet-control-layers-separator {
            height: 0;
            border-top: 1px solid #ddd;
            margin: 5px -10px 5px -6px;
        }

        .leaflet-container .leaflet-control-attribution {
            background: #fff;
            background: rgba(255, 255, 255, 0.8);
            margin: 0;
        }

        .leaflet-control-attribution,
        .leaflet-control-scale-line {
            padding: 0 5px;
            color: #333;
            line-height: 1.4;
        }

        .leaflet-control-attribution a {
            text-decoration: none;
        }

        .leaflet-control-attribution a:hover,
        .leaflet-control-attribution a:focus {
            text-decoration: underline;
        }

        .leaflet-attribution-flag {
            display: inline !important;
            vertical-align: baseline !important;
            width: 1em;
            height: 0.6669em;
        }

        .leaflet-left .leaflet-control-scale {
            margin-left: 5px;
        }

        .leaflet-bottom .leaflet-control-scale {
            margin-bottom: 5px;
        }

        .leaflet-control-scale-line {
            border: 2px solid #777;
            border-top: none;
            line-height: 1.1;
            padding: 2px 5px 1px;
            white-space: nowrap;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.8);
            text-shadow: 1px 1px #fff;
        }

        .leaflet-control-scale-line:not(:first-child) {
            border-top: 2px solid #777;
            border-bottom: none;
            margin-top: -2px;
        }

        .leaflet-control-scale-line:not(:first-child):not(:last-child) {
            border-bottom: 2px solid #777;
        }

        .leaflet-touch .leaflet-control-attribution,
        .leaflet-touch .leaflet-control-layers,
        .leaflet-touch .leaflet-bar {
            box-shadow: none;
        }

        .leaflet-touch .leaflet-control-layers,
        .leaflet-touch .leaflet-bar {
            border: 2px solid rgba(0, 0, 0, 0.2);
            background-clip: padding-box;
        }

        .leaflet-popup {
            position: absolute;
            text-align: center;
            margin-bottom: 20px;
        }

        .leaflet-popup-content-wrapper {
            padding: 1px;
            text-align: left;
            border-radius: 12px;
        }

        .leaflet-popup-content {
            margin: 13px 24px 13px 20px;
            line-height: 1.3;
            font-size: 13px;
            font-size: 1.08333em;
            min-height: 1px;
        }

        .leaflet-popup-content p {
            margin: 17px 0;
            margin: 1.3em 0;
        }

        .leaflet-popup-tip-container {
            width: 40px;
            height: 20px;
            position: absolute;
            left: 50%;
            margin-top: -1px;
            margin-left: -20px;
            overflow: hidden;
            pointer-events: none;
        }

        .leaflet-popup-tip {
            width: 17px;
            height: 17px;
            padding: 1px;

            margin: -10px auto 0;
            pointer-events: auto;

            -webkit-transform: rotate(45deg);
            -moz-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        .leaflet-popup-content-wrapper,
        .leaflet-popup-tip {
            background: white;
            color: #333;
            box-shadow: 0 3px 14px rgba(0, 0, 0, 0.4);
        }

        .leaflet-container a.leaflet-popup-close-button {
            position: absolute;
            top: 0;
            right: 0;
            border: none;
            text-align: center;
            width: 24px;
            height: 24px;
            font: 16px/24px Tahoma, Verdana, sans-serif;
            color: #757575;
            text-decoration: none;
            background: transparent;
        }

        .leaflet-container a.leaflet-popup-close-button:hover,
        .leaflet-container a.leaflet-popup-close-button:focus {
            color: #585858;
        }

        .leaflet-popup-scrolled {
            overflow: auto;
        }

        .leaflet-oldie .leaflet-popup-content-wrapper {
            -ms-zoom: 1;
        }

        .leaflet-oldie .leaflet-popup-tip {
            width: 24px;
            margin: 0 auto;
            -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";
            filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);
        }

        .leaflet-oldie .leaflet-control-zoom,
        .leaflet-oldie .leaflet-control-layers,
        .leaflet-oldie .leaflet-popup-content-wrapper,
        .leaflet-oldie .leaflet-popup-tip {
            border: 1px solid #999;
        }

        .leaflet-div-icon {
            background: #fff;
            border: 1px solid #666;
        }

        .leaflet-tooltip {
            position: absolute;
            padding: 6px;
            background-color: #fff;
            border: 1px solid #fff;
            border-radius: 3px;
            color: #222;
            white-space: nowrap;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
        }

        .leaflet-tooltip.leaflet-interactive {
            cursor: pointer;
            pointer-events: auto;
        }

        .leaflet-tooltip-top:before,
        .leaflet-tooltip-bottom:before,
        .leaflet-tooltip-left:before,
        .leaflet-tooltip-right:before {
            position: absolute;
            pointer-events: none;
            border: 6px solid transparent;
            background: transparent;
            content: "";
        }

        .leaflet-tooltip-bottom {
            margin-top: 6px;
        }

        .leaflet-tooltip-top {
            margin-top: -6px;
        }

        .leaflet-tooltip-bottom:before,
        .leaflet-tooltip-top:before {
            left: 50%;
            margin-left: -6px;
        }

        .leaflet-tooltip-top:before {
            bottom: 0;
            margin-bottom: -12px;
            border-top-color: #fff;
        }

        .leaflet-tooltip-bottom:before {
            top: 0;
            margin-top: -12px;
            margin-left: -6px;
            border-bottom-color: #fff;
        }

        .leaflet-tooltip-left {
            margin-left: -6px;
        }

        .leaflet-tooltip-right {
            margin-left: 6px;
        }

        .leaflet-tooltip-left:before,
        .leaflet-tooltip-right:before {
            top: 50%;
            margin-top: -6px;
        }

        .leaflet-tooltip-left:before {
            right: 0;
            margin-right: -12px;
            border-left-color: #fff;
        }

        .leaflet-tooltip-right:before {
            left: 0;
            margin-left: -12px;
            border-right-color: #fff;
        }
    </style>
    <!-- HTML to Image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        /* Glassmorphism utility */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .glass-dark {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Hide scrollbar for clean horizontal scroll */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Map specific overrides */
        #map {
            z-index: 10;
        }
    </style>
</head>

<body class="text-gray-800 antialiased selection:bg-blue-100 selection:text-blue-900">

    <!-- Navigation/Header area -->
    <div id="globe-container"
        class="fixed top-20 left-0 w-[500px] h-[500px] z-0 opacity-50 transition-opacity duration-1000">
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 relative z-10">

        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 mb-2"
                id="header-title">
                Here's your 2026 Timeline update
            </h1>
            <p class="text-lg text-gray-500 font-light" id="header-description">
                A visual summary of your journey around the world.
            </p>
        </header>

        <!-- Initial Upload Section -->
        <section id="upload-section" class="max-w-xl mx-auto mb-16">
            <div
                class="glass rounded-3xl p-8 shadow-xl text-center transform hover:scale-[1.01] transition-transform duration-300">
                <div
                    class="mb-6 inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-blue-600">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Load Your Data</h2>
                <p class="text-sm text-gray-500 mb-6">
                    Upload your <code>GoogleTimeline.json</code>. <br>Your data stays 100% private and is processed
                    locally.
                </p>

                <div class="relative group">
                    <input type="file" id="timeline-file-input" accept=".json"
                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" />
                    <div
                        class="bg-blue-600 text-white rounded-xl px-6 py-4 font-semibold shadow-lg group-hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
                        <span>Select File</span>
                    </div>
                </div>
                <div id="upload-status" class="mt-4 text-sm font-medium text-gray-500 min-h-[20px]"></div>
            </div>
        </section>

        <!-- Main Dashboard (Hidden by default) -->
        <div id="dashboard-content" class="hidden space-y-8 pb-12">

            <!-- Map Section -->
            <section class="glass rounded-3xl shadow-lg border border-white/50 overflow-hidden relative group">
                <div
                    class="p-6 border-b border-gray-100/50 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <h2 class="text-xl font-bold text-gray-900 flex items-center gap-2">
                        <span class="material-icons-round text-blue-600">map</span> Interactive Map
                    </h2>

                    <div class="flex flex-wrap items-center gap-3 bg-gray-100/50 p-1.5 rounded-xl">
                        <select id="map-year-filter"
                            class="bg-transparent text-sm font-medium text-gray-700 px-3 py-1.5 rounded-lg focus:outline-none focus:bg-white transition-colors cursor-pointer border-none ring-0">
                            <option value="">All Years</option>
                        </select>
                        <div class="h-4 w-[1px] bg-gray-300"></div>
                        <button id="map-style-light"
                            class="p-2 rounded-lg text-sm font-medium transition-all bg-white shadow-sm text-blue-600">Light</button>
                        <button id="map-style-dark"
                            class="p-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 transition-all">Dark</button>
                        <div class="h-4 w-[1px] bg-gray-300"></div>
                        <button id="map-fullscreen" class="p-2 text-gray-500 hover:text-blue-600 transition-colors"
                            title="Toggle Fullscreen">
                            <span id="fullscreen-icon" class="material-icons-round">fullscreen</span>
                        </button>
                        <div class="h-4 w-[1px] bg-gray-300"></div>
                        <button onclick="shareCard('map-container-wrapper')"
                            class="p-2 text-gray-500 hover:text-blue-600 transition-colors" title="Share Map">
                            <span class="material-icons-round">ios_share</span>
                        </button>
                    </div>
                </div>

                <div id="map-container-wrapper" class="relative bg-gray-100 w-full h-[600px]">
                    <div id="map" class="w-full h-full"></div>
                </div>
            </section>

            <!-- Key Metrics Grid -->
            <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="statistics-grid">
                <!-- Stat cards managed by script.js -->
            </section>

            <!-- Travel Summary (Globe) -->
            <section class="glass rounded-3xl p-8 shadow-lg border border-white/50 relative overflow-hidden"
                id="travel-summary-card">
                <div class="relative z-10 flex flex-col md:flex-row items-center gap-12">
                    <div class="relative group cursor-pointer w-48 h-48 flex items-center justify-center rounded-full bg-gradient-to-r from-blue-500/10 to-purple-500/10"
                        onclick="shareCard('travel-summary-card')">
                        <div
                            class="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full opacity-20 blur-xl group-hover:opacity-30 transition-opacity">
                        </div>
                        <div class="relative z-10 flex flex-col items-center justify-center pointer-events-none">
                            <span class="text-4xl font-black text-gray-900 drop-shadow-sm"
                                id="world-percentage">--%</span>
                            <span class="text-xs font-bold text-gray-600 tracking-wider uppercase">World Covered</span>
                        </div>
                    </div>

                    <div class="flex-1 text-center md:text-left space-y-4">
                        <h3 class="text-2xl font-bold text-gray-800">Your Global Footprint</h3>
                        <p class="text-lg text-gray-600 leading-relaxed" id="travel-description">
                            Analysis pending...
                        </p>
                        <button onclick="shareCard('travel-summary-card')"
                            class="inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors shadow-lg shadow-blue-600/20 mt-2">
                            <span class="material-icons-round text-sm">ios_share</span> <span>Share Summary</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Detailed Stats Grid -->
            <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">

                <!-- Travel Modes -->
                <section class="glass rounded-3xl p-6 shadow-lg border border-white/50 xl:col-span-1 flex flex-col"
                    id="travel-modes-card">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">How You Move</h3>
                        <button onclick="shareCard('travel-modes-card')"
                            class="text-gray-400 hover:text-blue-600 transition-colors" title="Share">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1" id="travel-trends-grid">
                        <!-- Content -->
                    </div>
                </section>

                <!-- Visit Trends -->
                <section class="glass rounded-3xl p-6 shadow-lg border border-white/50 xl:col-span-1 flex flex-col"
                    id="visit-trends-card">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">Top Spots</h3>
                        <button onclick="shareCard('visit-trends-card')"
                            class="text-gray-400 hover:text-blue-600 transition-colors" title="Share">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1" id="visit-trends-grid">
                        <!-- Content -->
                    </div>
                </section>

                <!-- Stats Column -->
                <div class="flex flex-col gap-6 xl:col-span-1">

                    <!-- Time -->
                    <section class="glass rounded-3xl p-6 shadow-lg border border-white/50" id="time-card">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Time Spent</h3>
                            <button onclick="shareCard('time-card')"
                                class="text-gray-400 hover:text-blue-600 transition-colors" title="Share">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                                    </path>
                                </svg>
                            </button>
                        </div>
                        <div id="time-distribution-stats" class="space-y-6"></div>
                    </section>

                    <!-- Records -->
                    <section class="glass rounded-3xl p-6 shadow-lg border border-white/50" id="records-card">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-gray-900">Personal Records</h3>
                            <button onclick="shareCard('records-card')"
                                class="text-gray-400 hover:text-blue-600 transition-colors" title="Share">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                                    </path>
                                </svg>
                            </button>
                        </div>
                        <div id="record-breakers-stats" class="space-y-4"></div>
                    </section>

                </div>

            </div>

            <!-- Eco Impact -->
            <section class="glass rounded-3xl p-8 shadow-lg border border-white/50" id="eco-card">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 flex items-center gap-2">
                            <span class="material-icons-round text-green-600">eco</span> Environmental Impact
                        </h2>
                        <p class="text-sm text-gray-500 mt-1">Estimated footprint based on travel modes</p>
                    </div>
                    <button onclick="shareCard('eco-card')"
                        class="text-gray-400 hover:text-blue-600 transition-colors p-2 bg-white rounded-full shadow-sm"
                        title="Share">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="eco-impact-grid"></div>
            </section>

            <!-- Cities & Places -->
            <div class="space-y-12">
                <!-- Cities -->
                <section>
                    <div class="flex items-center gap-4 mb-6 px-2">
                        <h2 class="text-2xl font-bold text-gray-800">Top Cities</h2>
                        <div class="h-px bg-gray-300 flex-1"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4" id="cities-grid"></div>
                </section>

                <!-- Places -->
                <section>
                    <div class="flex items-center gap-4 mb-6 px-2">
                        <h2 class="text-2xl font-bold text-gray-800">Memorable Places</h2>
                        <div class="h-px bg-gray-300 flex-1"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="places-grid"></div>
                </section>
            </div>

            <!-- All Time Stats Footer -->
            <section class="mt-16 bg-gray-900 rounded-3xl p-10 text-white shadow-2xl relative overflow-hidden"
                id="all-time-card">
                <div class="relative z-10">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10">
                        <h2 class="text-3xl font-bold">Lifetime Stats</h2>
                        <button onclick="shareCard('all-time-card')"
                            class="mt-4 md:mt-0 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg backdrop-blur-sm transition-colors text-sm font-medium flex items-center gap-2">
                            <span>Share Lifetime Stats</span>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-12" id="all-time-stats">
                        <!-- Content -->
                    </div>
                </div>
            </section>

        </div>

        <footer class="mt-20 text-center text-gray-400 text-sm pb-10 space-y-4">
            <button id="restart-button" onclick="window.location.reload()"
                class="hidden inline-flex items-center gap-2 px-4 py-2 bg-white/60 text-gray-800 rounded-xl font-medium hover:bg-white shadow-sm border border-white/70 transition-colors">
                <span class="material-icons-round text-sm">restart_alt</span>
                <span>Upload a new file</span>
            </button>
            <p>Built with ❤️ • Your data never leaves this browser.</p>
        </footer>

    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="timeline-utils.js"></script>
    <script src="components/globe.js"></script>
    <script src="script.js"></script>
</body>

</html>